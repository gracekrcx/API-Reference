# Route Segment Config
Route Segment options 可讓您透過直接匯出(exporting)下列 變數(variables) 來設定 Page, Layout, or Route Handler  的行為：

|        Option   |                       Type                          | Default  |
|  ------------   | --------------------------------------------------  | -------- |
| dynamic         | 'auto' / 'force-dynamic' / 'error' / 'force-static' | auto     |
| dynamicParams   | boolean                                             | true     |
| revalidate      | false / 'force-cache' / 0 / number                  | false    |
| fetchCache      | 'auto' / 'default-cache' / 'only-cache' / 'force-cache' / 'force-no-store' / 'default-no-store' / 'only-no-store'                                    | auto     |
| runtime         | 'nodejs' / 'edge'                                   | nodejs   |
| preferredRegion	| 'auto' / 'global' / 'home' / string / string[]      | auto     |
| maxDuration	    | number  |  Set by deployment platform |

```js
// layout.tsx / page.tsx / route.ts

export const dynamic = 'auto'
export const dynamicParams = true
export const revalidate = false
export const fetchCache = 'auto'
export const runtime = 'nodejs'
export const preferredRegion = 'auto'
export const maxDuration = 5
 
export default function MyComponent() {}

```

**Good to know:**   
目前 配置選項 的值需要可 statically analyzable。    
例如，revalidate = 600 有效，但 revalidate = 60 * 10 無效。

---

## Options

### dynamic

將 layout or page 的 dynamic behavior 變更為 fully static 或 or fully dynamic。
```js
// layout.tsx / page.tsx / route.ts

export const dynamic = 'auto'
// 'auto' | 'force-dynamic' | 'error' | 'force-static'

```
**Good to know:**
`app` directory 中的 new model 支援在 `fetch request level`  進行 粒度 快取 控制(granular caching control)，而不是 頁面目錄中 頁面層級的 `getServerSideProps` 和 `getStaticProps` 的二進位全有或全無模型(binary all-or-nothing model)。    
`dynamic` 選項是一種為了方便而選擇返回到先前的模型的方法，並提供更簡單的遷移路徑(simpler migration path)。

- `app` 在 `fetch request` level
- `pages` 在 `page-level`

> x

- **'auto'** (default):
  預設選項會盡可能緩存(cache as much as possible)，而不阻止任何 components 選擇動態行為(dynamic behavior)。
  
- **'force-dynamic'**:
  Force dynamic rendering and uncached data fetching of a `layout` or `page` by disabling all caching of fetch requests and always revalidating。該選項相當於：
    - `getServerSideProps()` in the `pages` directory.
    - Setting the option of every fetch() request in a layout or page to
      `{ cache: 'no-store', next: { revalidate: 0 } }`.
    - Setting the segment config to export const `fetchCache` = `'force-no-store'`

- **'error'**:
  如果任何 components 使用 dynamic functions 或 uncached data，則會引發錯誤，從而 強制 static rendering 並 cache the data of a layout or page。該選項相當於：
    - `getStaticProps()` in the `pages` directory.
    - Setting the option of every fetch() request in a layout or page to
      `{ cache: 'force-cache' }`
    - Setting the segment config to fetchCache = 'only-cache', dynamicParams = false.
    - Dynamic = 'error' 將 dynamicParams 的預設值從 true 更改為 false。
      您可以透過手動設定 `dynamicParams = true` 來選擇重新 動態渲染(dynamically rendering) 不是由 `generateStaticParams` 產生的動態參數(dynamic params)的頁面。
  
- **'force-static'**:
透過強制 cookies()、headers() 和 useSearchParams() 傳回 empty values 來 強制 static rendering 並 cache the data of a layout or page。

**Good to know:**   
有關如何從 `getServerSideProps` 和 `getStaticProps` 遷移到 `dynamic: 'force-dynamic'` and `dynamic: 'error'` 的說明可以在升級指南中找到。

---

### dynamicParams


























