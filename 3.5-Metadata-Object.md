# Metadata Object and generateMetadata Options
此頁面涵蓋了所有 **Config-based Metadata** options 以及 `generateMetadata` 和 static metadata object。

```js
// layout.tsx | page.tsx

import { Metadata } from 'next'

// either Static metadata
export const metadata: Metadata = {
  title: '...',
}

// or Dynamic metadata
export async function generateMetadata({ params }) {
  return {
    title: '...',
  }
}

```

**Good to know:**
- metadata object and generateMetadata function exports **only supported in Server Components**。
- You cannot export `both` the `metadata object` and `generateMetadata function` from the same route segment.

---

## The metadata object
To define static metadata,   
`export` a `Metadata object` from a `layout.js` or `page.js` file.

```js
// layout.tsx | page.tsx

import { Metadata } from 'next'
 
export const metadata: Metadata = {
  title: '...',
  description: '...',
}
 
export default function Page() {}

```

---

## generateMetadata function

Dynamic metadata 據依賴 dynamic information，例如 current route parameters, external data, or metadata in parent segments，can be set by `exporting` a `generateMetadata` function that returns a Metadata object.

```js
// app/products/[id]/page.tsx

import { Metadata, ResolvingMetadata } from 'next'

type Props = {
  params: { id: string }
  searchParams: { [key: string]: string | string[] | undefined }
}

export async function generateMetadata(
  { params, searchParams }: Props,
  parent: ResolvingMetadata
): Promise<Metadata> {
  // read route params
  const id = params.id
 
  // fetch data
  const product = await fetch(`https://.../${id}`).then((res) => res.json())
 
  // optionally access and extend (rather than replace) parent metadata
  // 選擇性地存取和擴展（而不是替換）父元數據
  const previousImages = (await parent).openGraph?.images || []
 
  return {
    title: product.title,
    openGraph: {
      images: ['/some-specific-page-image.jpg', ...previousImages],
    },
  }
}
 
export default function Page({ params, searchParams }: Props) {}
```

## Parameters

`generateMetadata` function accepts the following parameters:
### `props` 
An `object` containing the parameters of the current route:

- **params**   
  An object containing the `dynamic route parameters object` from the root segment down to the segment generateMetadata is called from.
      
|              Route             |      URL    |          params         |
|  ----------------------------  | ----------  | ----------------------  |
| app/shop/[slug]/page.js        | /shop/1	   | { slug: '1' }           |
| app/shop/[tag]/[item]/page.js  | /shop/1/2	 | { tag: '1', item: '2' } |
| app/shop/[...slug]/page.js     | /shop/1/2	 | { slug: ['1', '2'] }    |

- **searchParams**   
  An object containing the current URL's `search params`. Examples:

|      URL        |    searchParams     |  
|  ------------   | ------------------- |  
| /shop?a=1       | { a: '1' }	        |  
| /shop?a=1&b=2   | { a: '1', b: '2' }	|  
| /shop?a=1&a=2   | { a: ['1', '2'] }   |  

### `parent`  
來自 parent route segments 的 已解析 元資料 (resolved metadata) 的 promise。

## Returns
generateMetadata should return a `Metadata object` containing one or more metadata fields.

**Good to know:**
- 如果 metadata doesn't depend on `runtime` information，it should be defined using the `static metadata object` rather than `generateMetadata`。
- 跨(across) `generateMetadata`、`generateStaticParams`、Layouts、Pages 和 Server Components 的 same data 的 fetch requests 會自動 memoized。   
  如果 fetch 不可用，可以使用  React `cache`。
- `searchParams` are only available in `page.js` segments.
- The `redirect()` and `notFound()` Next.js methods can also be used inside `generateMetadata`.

---

## Metadata Fields

### title
title 屬性(attribute)用於設定文件的標題。它可以被定義為一個簡單的字串(string)或一個可選的模板物件(template object)。

#### String
#### Template object
- **title.default**   
  (1) can be used to provide a `fallback title` to `child` route segments that don't define a title.   
  (2) a default is required when creating a template   
- **title.template**    
  (1) 可用於在 子路線段 中定義的標題中加上 前綴 或 後綴。   
  (2) 舉例： Output: <title>About | Acme</title>   


--- 

### description








